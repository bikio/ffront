<div class="clear">

</div>
<div class="edit" style=" margin: 1%; text-align: center !important;">
	<center>
		<div class="overlay hide"></div>
		<section>

			<form id="fishForm" name="fishForm" action="" method="">

				<input type="hidden" id="id" />

				<div class="row center">
					<input type="button" class="btn" value="Image" onclick=uploadphoto(); />
				</div>
				<br>

				<div class="row">
					<label for="pound">Distributor Company</label>
					<input type="" class="input" id="distributor" required />
				</div>
				<div class="row">
					<label for="pound">Contact Name</label>
					<input type="" class="input" id="contactName" required />
				</div>

				<div class="row">
					<label for="pound">Phone </label>
					<input type="" class="input" id="phone" required />
				</div>

				<div class="row">
					<label for="pound">Email</label>
					<input type="" class="input" id="email" required />
				</div>

				<div class="row">
					<label for="pound">Processing Method </label>
					<select id="method" data-inline="true" data-mini="true" data-icon="arrow-d" data-iconpos="right" data-native-menu="true">
						<option value="Fishline" selected="selected">Fishline</option>
						<option value="Net">Net</option>
					</select>
				</div>

				<div class="row">
					<label for="pound">City </label>
					<select id="city" data-inline="true" data-mini="true" data-icon="arrow-d" data-iconpos="right" data-native-menu="true">
						<option value="Honolulu, HI" selected="selected">Honolulu, Oahu
						</option>
						<option value="Kanehoe, HI">Kanehoe, Oahu</option>
						<option value="Kahului, HI">Kahului, Maui</option>
						<option value="Half Moon Bay, San Francisco, CA">Half Moon Bay, San Francisco</option>
						<option value="Fishermen Wharf, San Francisco, CA">Fishermen Wharf, San Francisco</option>
						<option value="Sea Port Village, San Diego, CA">Sea Port Village, San Diego</option>
					</select>
				</div>

				<div class="row">
					<label for="pound">Selling Address </label>
					<input type="" class="input" id="address" required />
				</div>

				<div class="row">
					<div id="identification"></div>
				</div>

				<br>

				<div class="row center">
					<input type="button" class="btn" value="SAVE" onclick=save(); />
				</div>
			</form>
		</section>
	</center>
</div>

<script>
	function getDistributor(distributor) {

		var getUrl = "http://fresh.freshfishalerts.appspot.com/getdistributor?distributor=" + distributor;

		$.post(getUrl, {}, function(data, status) {

			var fish = jQuery.parseJSON(data);

			$("#id").val(fish.ID);
			$("#identification").html("Internal App ID: " + fish.ID);
			$("#distributor").val(fish.distributor);
			$("#contactName").val(fish.contactName);
			$("#email").val(fish.email);
			$("#method").val(fish.method);
			$("#city").val(fish.city);
			$("#address").val(fish.address);
			$("#phone").val(fish.phone);
		});
	}


	var distributor = getUrlParameter("distributor");
	getDistributor(distributor);

	function save() {

		var saveUrl = "http://fresh.freshfishalerts.appspot.com/savedistributor?id=" + $("#id").val() + "&distributor=" + encodeURIComponent($("#distributor").val()) + "&contactName=" + encodeURIComponent($("#contactName").val()) + "&email=" + encodeURIComponent($("#email").val()) + "&phone=" + encodeURIComponent($("#phone").val()) + "&method=" + encodeURIComponent($("#method").val()) + "&address=" + encodeURIComponent($("#address").val()) + "&city=" + encodeURIComponent($("#city").val());

		$.post(saveUrl, {}, function(data, status) {
			getDistributor(data.trim());
			alert("Information successfully saved. Thank you.");
		});
	}

	function uploadphoto() {
		window.location.href = 'http://freshr.io/distributor/uploadimage.jsp?id='
				+ $("#id").val();
	}
</script>
